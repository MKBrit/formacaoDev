<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors 3</title>
</head>

<body>
    <p>Rock Paper Scissors</p>
    <button onclick="getResult('rock')">Rock</button>

    <button onclick="getResult('paper')">Paper</button>

    <button onclick="getResult('scissors')">Scissors</button>

    <button onclick="
        score.wins = 0;
        score.losses =0;
        score.ties = 0;
        localStorage.removeItem('score');
    ">Reset Score</button>

    <p>Scoreboard</p>
    <br>
    <p>Wins : - Losses : - Ties : </p>





    <script>
        // Get the score object from local storage and transform it back from json string
        const score = JSON.parse(localStorage.getItem('score')) || { // OR USE THIS
            wins: 0,
            losses: 0,
            ties: 0
            };
        // If there isn't a score, create one
        // if(!score){
        //     score = {
        //         wins: 0,
        //         losses: 0,
        //         ties: 0
        //     };
        // }

        function getResult(move) {
            const rand = Math.random();
            let cpuMove = '';

            if (rand < 1 / 3)
                cpuMove = 'rock';
            else if (rand >= 1 / 3 && rand < 2 / 3)
                cpuMove = 'paper';
            else if (rand >= 2 / 3)
                cpuMove = 'scissors';


            if (move === cpuMove) {
                alert(`Player: ${move}\nCPU: ${cpuMove}\nI\'s a Tie!`)
                score.ties++;
            }
            else if (move === 'rock' && cpuMove === 'scissors'
                || move === 'scissors' && cpuMove === 'paper'
                || move === 'paper' && cpuMove === 'rock') {
                alert(`Player: ${move}\nCPU: ${cpuMove}\nYou win!`)
                score.wins++;
            }
            else {
                alert(`Player: ${move}\nCPU: ${cpuMove}\nYou lose!`)
                score.losses++;
            }

            // Save the score to local storage as string (NEEDED)
            // so when you refresh page, score is the same as last time.
            localStorage.setItem('score', JSON.stringify(score));

            console.log('New Game')
            console.log('Player : ', move)
            console.log('CPU : ', cpuMove)
        }

    </script>
</body>

</html>